<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8-Bit Retro Racer</title>
    <style>
        body {
            margin: 0;
            background: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
        }
        canvas {
            border: 4px solid #fff;
            background: #444;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .ui {
            position: absolute;
            top: 20px;
            text-align: center;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="ui">
        <h1 id="score">SKOR: 0</h1>
        <p id="msg">BAŞLAMAK İÇİN TIKLA (Yön Tuşlarını Kullan)</p>
    </div>
    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreElement = document.getElementById("score");
    const msgElement = document.getElementById("msg");

    canvas.width = 400;
    canvas.height = 600;

    // Oyun Değişkenleri
    let gameRunning = false;
    let score = 0;
    let speed = 5;
    let frame = 0;

    const player = {
        x: canvas.width / 2 - 20,
        y: canvas.height - 100,
        w: 40,
        h: 70,
        color: "#e74c3c"
    };

    let enemies = [];
    let keys = {};

    // Kontroller
    window.addEventListener("keydown", e => keys[e.code] = true);
    window.addEventListener("keyup", e => keys[e.code] = false);
    canvas.addEventListener("click", () => {
        if (!gameRunning) resetGame();
    });

    function resetGame() {
        score = 0;
        speed = 5;
        enemies = [];
        player.x = canvas.width / 2 - 20;
        gameRunning = true;
        msgElement.innerText = "";
        update();
    }

    function spawnEnemy() {
        if (frame % 60 === 0) {
            const x = Math.random() * (canvas.width - 40);
            enemies.push({ x, y: -70, w: 40, h: 70, color: "#3498db" });
        }
    }

    function drawRect(obj) {
        // 8-bit gövde
        ctx.fillStyle = obj.color;
        ctx.fillRect(obj.x, obj.y, obj.w, obj.h);
        
        // Tekerlekler (Siyah küçük kareler)
        ctx.fillStyle = "#000";
        ctx.fillRect(obj.x - 5, obj.y + 10, 5, 15);
        ctx.fillRect(obj.x + obj.w, obj.y + 10, 5, 15);
        ctx.fillRect(obj.x - 5, obj.y + 45, 5, 15);
        ctx.fillRect(obj.x + obj.w, obj.y + 45, 5, 15);

        // Cam
        ctx.fillStyle = "#ecf0f1";
        ctx.fillRect(obj.x + 5, obj.y + 15, obj.w - 10, 15);
    }

    function drawRoad() {
        ctx.fillStyle = "#555";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Şerit çizgileri
        ctx.strokeStyle = "#fff";
        ctx.setLineDash([20, 20]);
        ctx.lineDashOffset = -frame * speed;
        ctx.beginPath();
        ctx.moveTo(canvas.width / 2, 0);
        ctx.lineTo(canvas.width / 2, canvas.height);
        ctx.stroke();
    }

    function update() {
        if (!gameRunning) return;

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        frame++;

        drawRoad();

        // Oyuncu Hareketi
        if (keys["ArrowLeft"] && player.x > 0) player.x -= 7;
        if (keys["ArrowRight"] && player.x < canvas.width - player.w) player.x += 7;

        drawRect(player);

        // Düşman Arabalar
        spawnEnemy();
        enemies.forEach((enemy, index) => {
            enemy.y += speed;
            drawRect(enemy);

            // Çarpışma Kontrolü
            if (
                player.x < enemy.x + enemy.w &&
                player.x + player.w > enemy.x &&
                player.y < enemy.y + enemy.h &&
                player.y + player.h > enemy.y
            ) {
                gameOver();
            }

            // Skor ve Temizlik
            if (enemy.y > canvas.height) {
                enemies.splice(index, 1);
                score++;
                scoreElement.innerText = `SKOR: ${score}`;
                if (score % 10 === 0) speed += 0.2; // Zorluk artışı
            }
        });

        requestAnimationFrame(update);
    }

    function gameOver() {
        gameRunning = false;
        msgElement.innerText = "OYUN BİTTİ! TEKRARLAMAK İÇİN TIKLA";
    }

    // İlk kareyi çiz
    drawRoad();
    drawRect(player);

</script>
</body>
</html>
